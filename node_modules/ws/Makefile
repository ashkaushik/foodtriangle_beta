ALL_TESTS = $(shell find test/ -name '*.test.js')
ALL_INTEGRATION = $(shell find test/ -name '*.integration.js')

<<<<<<< HEAD
=======
all:
	node-gyp configure build

clean:
	node-gyp clean

>>>>>>> origin/foodtriangle_node
run-tests:
	@./node_modules/.bin/mocha \
		-t 5000 \
		-s 2400 \
		$(TESTFLAGS) \
		$(TESTS)

run-integrationtests:
	@./node_modules/.bin/mocha \
		-t 5000 \
		-s 6000 \
		$(TESTFLAGS) \
		$(TESTS)

<<<<<<< HEAD
run-coverage:
	@./node_modules/.bin/istanbul cover --report html \
		./node_modules/.bin/_mocha -- \
		-t 5000 \
		-s 6000 \
		$(TESTFLAGS) \
		$(TESTS)

=======
>>>>>>> origin/foodtriangle_node
test:
	@$(MAKE) NODE_TLS_REJECT_UNAUTHORIZED=0 NODE_PATH=lib TESTS="$(ALL_TESTS)" run-tests

integrationtest:
	@$(MAKE) NODE_TLS_REJECT_UNAUTHORIZED=0 NODE_PATH=lib TESTS="$(ALL_INTEGRATION)" run-integrationtests

<<<<<<< HEAD
coverage:
	@$(MAKE) NODE_TLS_REJECT_UNAUTHORIZED=0 NODE_PATH=lib TESTS="$(ALL_TESTS)" run-coverage

=======
>>>>>>> origin/foodtriangle_node
benchmark:
	@node bench/sender.benchmark.js
	@node bench/parser.benchmark.js

autobahn:
	@NODE_PATH=lib node test/autobahn.js

autobahn-server:
	@NODE_PATH=lib node test/autobahn-server.js

<<<<<<< HEAD
.PHONY: test coverage
=======
.PHONY: test
>>>>>>> origin/foodtriangle_node
